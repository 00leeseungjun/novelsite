<!-- <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link rel="stylesheet" href="/novel.css" />
        <link rel="stylesheet" href="/managenovel.css" />
    </head>
    <body>
        <!DOCTYPE html>
        <html lang="en">
            <head>
                <meta charset="UTF-8" />
                <meta
                    name="viewport"
                    content="width=device-width, initial-scale=1.0"
                />
                <title>모든 소설</title>
                <link rel="stylesheet" href="index.css" />
            </head>
            <body>
                <div><h2>내 작품</h2></div>
                <div class="manage-section">
                    <div class="novel-image">소설 이미지</div>
                    <div class="novel-edit">
                        <input type="text" />
                        <textarea name="" id=""></textarea>
                    </div>
                </div>
                <div class="button-section">
                    <span><button>취소</button></span><span><button>수정</button></span>
                </div>
            </body>
        </html>
    </body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>작품 수정</title>
<link rel="stylesheet" href="/editnovel.css">
</head>
<body>
<div class="page-container">
<h1 class="page-title">작품 수정 (Edit Novel)</h1>

<!-- 
    ************************************************************
    * [필수 추가] 파일 업로드를 위해 enctype="multipart/form-data" 추가 *
    ************************************************************
    -->
<form action="/editnovel/<%= novel.novelId %>" method="POST" class="novel-form" enctype="multipart/form-data">

<!-- 수정할 novelId Hidden. 액션 경로에 포함하는 것이 RESTful합니다. -->
<input type="hidden" name="novelId" value="<%= novel.novelId %>">

<!-- 
        *******************************************************************
        * [추가] 현재 이미지 표시 및 새 이미지 업로드 필드 추가 (Multer 사용) *
        *******************************************************************
        -->
<div class="form-group image-upload-group">
<label>현재 작품 표지</label>
<div class="current-image-container">
<% if (novel.coverImageUrl) { %>
<!-- 
                    서버 설정(server.js)에서 '/pages/uploads' 경로를 static으로 설정해야 합니다. 
                    novel.coverImage는 파일 이름(예: 123456789.png)입니다.
                    -->
<img src="/<%= novel.coverImageUrl %>" alt="현재 표지 이미지" class="current-image">
<% } else { %>
<p class="no-image">등록된 이미지가 없습니다.</p>
<% } %>
</div>

<label for="coverImage">새 작품 표지 (선택 사항)</label>
<!-- 파일 업로드 input 필드 -->
<input 
type="file" 
id="coverImage" 
name="coverImage" 
accept="image/*"
>
<small class="help-text">새 이미지를 선택하면 기존 이미지는 교체됩니다. (JPG, PNG만 가능)</small>
</div>

<!-- 제목 -->
<div class="form-group">
<label for="title">작품 제목</label>
<input
type="text"
id="title"
name="title"
value="<%= novel.title %>"
required
>
</div>

<!-- 소개 -->
<div class="form-group">
<label for="description">작품 소개</label>
<textarea
id="description"
name="description"
required
><%= novel.description %></textarea>
</div>

<div class="form-group">
<label for="status">연재 상태</label>
<select id="status" name="status" required>
<!-- 현재 상태가 '연재 중'이면 selected 처리 -->
<option value="연재 중" <%= novel.status === '연재 중' ? 'selected' : '' %>>
연재 중
</option>
<!-- 현재 상태가 '완결'이면 selected 처리 -->
<option value="완결" <%= novel.status === '완결' ? 'selected' : '' %>>
완결
</option>
</select>
</div>

<!-- 버튼 -->
<div class="form-btns">
<a href="/mynovel" class="btn-secondary">취소</a>
<button type="submit" class="btn-primary">수정하기</button>
</div>

</form>
</div>
</body>
</html>